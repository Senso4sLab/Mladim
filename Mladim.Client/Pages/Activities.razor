@page "/activities"
@page "/activities/{projectName}"


@attribute [Authorize]

<PageTitle>Aktivnosti</PageTitle>

<MudTextField Value="@defaultOrg?.Name" Label="Izbrana organizacija" Variant="Variant.Outlined" ReadOnly="true"></MudTextField>

<MudStack Row  Justify="Justify.SpaceBetween">  
    <MudText Typo="Typo.h5">Seznam aktivnosti</MudText>
    <MudButton Color ="Color.Primary" >Dodaj Aktivnost</MudButton>
</MudStack>

 @if (activities.Count > 0)
{
    @* <SfGantt DataSource="@TaskCollection">
        <GanttTaskFields Id="TaskId" Name="TaskName" StartDate="StartDate" EndDate="EndDate"></GanttTaskFields>

    </SfGantt> *@

    <SfGantt  DataSource="@TaskCollection" Height="450px" Width="700px">
        <GanttTaskFields Id="TaskId" Notes="Samo" M Name="TaskName" StartDate="StartDate" EndDate="EndDate" ParentID="ParentId">
        </GanttTaskFields>
    </SfGantt>
}


    @* <MudDataGrid Items="activities" Filterable="true" QuickFilter="@_quickFilter" FilterMode="DataGridFilterMode.ColumnFilterRow" FilterCaseSensitivity="DataGridFilterCaseSensitivity.Default">
        <ToolBarContent>
            <MudText Typo="Typo.h6">Ime projekta</MudText>
            <MudSpacer />
            <MudTextField @bind-Value="ProjectName" Placeholder="Search" Adornment="Adornment.Start" Immediate="true"
                          AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
        </ToolBarContent>


        <Columns>
            <PropertyColumn Property="x => x.Attributes.Name" Title="Ime aktivnosti" Filterable="false" />
            <PropertyColumn Property="x => x.TimeRange.StartDate" Format="dd/MM/yyyy" Title="Pričetek" />
            <PropertyColumn Property="x => x.TimeRange.EndDate" Format="dd/MM/yyyy" Title="Konec" />
            <PropertyColumn Property="x => x.ProjectName" Title="Ime projekta" />
            <TemplateColumn CellClass="d-flex justify-end">
                <CellTemplate>
                    <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.MoreHoriz" @onclick="@(() => ShowActivityAsync(context.Item))"></MudIconButton>                  
                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
            <MudDataGridPager T="ActivityWithProjectNameVM" />
        </PagerContent>
    </MudDataGrid> *@






