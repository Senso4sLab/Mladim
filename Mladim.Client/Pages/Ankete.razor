@page "/survey/{activityId:int}"

@using Mladim.Client.Components.Anketa;
@using Mladim.Client.ViewModels.Survey;
@using Mladim.Domain.Enums;
@using Mladim.Domain.Extensions;

@layout SurveyLayout

<PageTitle>Anketa</PageTitle>

<MudContainer Class="py-5">   
    <MudStack Class="py-5" Spacing="5">
        <MudStack Spacing="4" AlignItems="AlignItems.Center">      
           <MudImage Height="50" Src="logo.png"></MudImage>
            @if (isSurveyActive)
            {
                <MudImage Height="70"  Src="step2.png" Class="d-flex align-center justify-center py-3"></MudImage>
            }
            else
            {
                <MudImage Height="70" Src="step1.png" Class="d-flex align-center justify-center py-3"></MudImage>
            }
            <MudText Typo="Typo.h2" Color="Color.Tertiary">@($"Prošnja za povratno informacijo o aktivnosti")</MudText>
            <MudText Typo="Typo.h1" Color="Color.Tertiary">To povabilo si dobil/-a zaradi tvoje udeležbe na omenjeni aktivnosti. Tvoje povratne informacije so namenjene bodočim izboljšavam podobnih aktivnosti, ki jih organizacija izvaja. Vsi podatki so anonimni, osebnih informacij ne zbiramo. Najlepša hvala!</MudText>
            @if (!isSurveyActive)
            {
                <SurveyAnonymousParticipant AnonymousButton="OnClickAnonymousParticipant"></SurveyAnonymousParticipant>
            }
        </MudStack>

        @if (Survey.Count > 0)
        {
            <MudStack AlignItems="AlignItems.Start" Spacing="4">
                @foreach (var survey in Survey)
                {
                    if (survey.Questions.Type == SurveyQuestionType.Text)
                    {
                    <TextQuestion Question="@survey.Questions" SurveryResponse="@(survey.SurveyResponseVM as SurveryTextResponseVM)"></TextQuestion>
                    }
                    else if (survey.Questions.Type == SurveyQuestionType.Rating)
                    {
                    <RatingQuestion Question="@survey.Questions" SurveryResponse="@(survey.SurveyResponseVM as SurveryRatingResponseVM)"></RatingQuestion>
                    }
                    else if (survey.Questions.Type == SurveyQuestionType.Boolean)
                    {
                    <BooleanQuestion Question="@survey.Questions" SurveryResponse="@(survey.SurveyResponseVM as SurveryBooleanResponseVM)"></BooleanQuestion>
                    }
                    else if (survey.Questions.Type == SurveyQuestionType.Multiple)
                    {
                    <MultipleButtonQuestions Question="@survey.Questions" SurveryResponse="@(survey.SurveyResponseVM as SurveryMultipleResponseVM)"></MultipleButtonQuestions>
                    }
                }
            </MudStack>
            <MudButton OnClick="SurveyEndClick" Class="d-flex align-center justify-center" Variant=Variant.Filled Color="Color.Primary">POŠLJI</MudButton>
        }

    </MudStack>  
</MudContainer>
  
   





