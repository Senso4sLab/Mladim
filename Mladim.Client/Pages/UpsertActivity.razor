@page "/project/{projectId:int}/activity"
@page "/activity/{activityId:int}"


<MudStack Class="py-5" Spacing="5">
    <MudStack Row Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
         <MudText Typo="Typo.h5">Vnesi podatke o aktivnosti</MudText>

         <MudStack Row="true" Spacing="2" Justify="Justify.FlexEnd">
             <MudFab Color="Color.Primary" Size="Size.Small" StartIcon="@Icons.Material.Filled.Save" OnClick="SaveActivityAsync" />
             <MudFab Color="Color.Secondary" Size="Size.Small" StartIcon="@Icons.Material.Filled.Cancel" OnClick="CancelProjectAsync" />
         </MudStack>

     </MudStack>

     <MudTextField @bind-Value="activity.Name" Variant="Variant.Outlined" Label="Ime aktivnosti">@activity.Name</MudTextField>
     <MudDateRangePicker Variant="Variant.Outlined" Label="Trajanje aktivnosti" @bind-DateRange="activity.ActivityDateRange" />


     <TextEditor @ref="textEditor" @bind-Text="@activity.Description" />


     <MudSelect T="MemberBaseVM" ToStringFunc="@((staff)=> staff.Name)" MultiSelection="true" @bind-SelectedValues="activity.LeadStaff" Variant="Variant.Outlined" Label="Vodje aktivnosti" AnchorOrigin="Origin.BottomCenter">
         @foreach (var staffMember in staff)
        {
            <MudSelectItem Value="staffMember">@staffMember.Name</MudSelectItem>
        }
    </MudSelect>

    <MudSelect T="MemberBaseVM" ToStringFunc="@((staff)=> staff.Name)" MultiSelection="true" @bind-SelectedValues="activity.Administrators" Variant="Variant.Outlined" Label="Delavci/prostovoljci" AnchorOrigin="Origin.BottomCenter">
        @foreach (var staffMember in staff)
        {
            <MudSelectItem Value="staffMember">@staffMember.Name</MudSelectItem>
        }
    </MudSelect>

    <MudStack Row Spacing="5" AlignItems="AlignItems.Center">
         <MudSelect T="MemberBaseVM" ToStringFunc="@((partner)=> partner.Name)" MultiSelection="true" @bind-SelectedValues="activity.Partners" Variant="Variant.Outlined" Label="Partnerji" AnchorOrigin="Origin.BottomCenter">
             @foreach (var partner in partners)
            {
                <MudSelectItem Value="partner">@partner.Name</MudSelectItem>
            }
        </MudSelect>
        <MudFab Color="Color.Primary" Size="Size.Small" StartIcon="@Icons.Material.Filled.Add" OnClick="AddPartnerAsync" />
    </MudStack>

    <MudStack Row Spacing="5" AlignItems="AlignItems.Center">
         <MudSelect T="MemberBaseVM" ToStringFunc="@((participant)=> participant.Name)" MultiSelection="true" @bind-SelectedValues="activity.Participants" Variant="Variant.Outlined" Label="Udeleženci" AnchorOrigin="Origin.BottomCenter">
             @foreach (var participant in participants)
            {
                <MudSelectItem Value="participant">@participant.Name</MudSelectItem>
            }
        </MudSelect>
        <MudFab Color="Color.Primary" Size="Size.Small" StartIcon="@Icons.Material.Filled.Add" OnClick="AddParticipantAsync" />
    </MudStack>

    <MudStack Row Spacing="5" AlignItems="AlignItems.Center">
         <MudTextField @bind-Value="anonymousParticipantsText" Label="Izbira udeležencev glede na starostno skupino in spol" Variant="Variant.Outlined"></MudTextField>
         <MudFab Color="Color.Primary" Size="Size.Small" StartIcon="@Icons.Material.Filled.Add" OnClick="AddAnonymousParticipantAsync" />
     </MudStack>

 </MudStack>

