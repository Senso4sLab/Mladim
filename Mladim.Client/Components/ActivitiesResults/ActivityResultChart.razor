@using Mladim.Client.ViewModels.Survey;
@using Mladim.Domain.Enums
@using Syncfusion.Blazor.Charts;
@using Mladim.Client.Components.Anketa;

 
<MudGrid>
    <MudItem sm="6">
        <MudPaper Outlined="true">
            <SfAccumulationChart Title="Razporeditev udeležencev po starostni skupini" EnableAnimation="true" EnableSmartLabels="true" CustomClass="custom-row">
                <AccumulationChartTitleStyle FontFamily="Poppins" FontWeight="400" Size="0.9rem" Color="#6e7191" />
                    <AccumulationChartSeriesCollection>
                    <AccumulationChartSeries DataSource="@ageDoughnut" PointColorMapping="Fill" XName="Name" YName="Value" InnerRadius="80%">
                            <AccumulationDataLabelSettings Visible="true" Name="Text" Position="AccumulationLabelPosition.Outside" >
                                    <AccumulationChartDataLabelFont FontFamily="Poppins" FontWeight="400" Size="0.9rem" Color="#6e7191" />
                            </AccumulationDataLabelSettings>
                        </AccumulationChartSeries>
                    </AccumulationChartSeriesCollection>
                    <AccumulationChartLegendSettings Visible="true" Alignment="Alignment.Near" Position="LegendPosition.Right">
                        <AccumulationChartLegendFont FontFamily="Poppins" FontWeight="400" Size="0.8rem" Color="#6e7191" />
                    </AccumulationChartLegendSettings>
            </SfAccumulationChart>
        </MudPaper>
    </MudItem>
    <MudItem sm="6">
        <MudPaper Outlined="true">
            <SfAccumulationChart Title="Razporeditev udeležencev po spolu" EnableAnimation="true" EnableSmartLabels="true">
                <AccumulationChartTitleStyle FontFamily="Poppins" FontWeight="400" Size="0.9rem" Color="#6e7191"/>
                    <AccumulationChartSeriesCollection>
                    <AccumulationChartSeries DataSource="@genderDoughnut" PointColorMapping="Fill" XName="Name" YName="Value" InnerRadius="80%">
                        <AccumulationDataLabelSettings Visible="true" Name="Text" Position="AccumulationLabelPosition.Outside">
                                <AccumulationChartDataLabelFont FontFamily="Poppins" FontWeight="400" Size="0.9rem" Color="#6e7191" />
                            </AccumulationDataLabelSettings>
                        </AccumulationChartSeries>
                    </AccumulationChartSeriesCollection>
                    <AccumulationChartLegendSettings Visible="true" Alignment="Alignment.Near" Position="LegendPosition.Right">
                            <AccumulationChartLegendFont FontFamily="Poppins" FontWeight="400" Size="0.8rem" Color="#6e7191" />
                    </AccumulationChartLegendSettings>
            </SfAccumulationChart>
        </MudPaper>
    </MudItem>

    @foreach(var responseGroup in SurveyResponsesGroupByQuestions)
    {
        <MudItem sm="12">
            @switch(responseGroup.SurveyQuestion.Type)
            {
                case SurveyQuestionType.Boolean:
                    <BoleanResponseChart Response="responseGroup as SurveyResponsesGroupedBySelectableQuestionVM" />
                    break;
                 case SurveyQuestionType.Rating:
                    <RatingReponseChart Response="responseGroup as SurveyResponsesGroupedBySelectableQuestionVM" />
                    break;
                case SurveyQuestionType.Text:
                    <SurveyTextResponses Response="responseGroup as SurveyTextResponsesGroupedByQuestion" />
                    break;
                case SurveyQuestionType.Multiple:
                    <ButtonGroupReponseChart Response="responseGroup as SurveyResponsesGroupedByMultipleSelectableQuestionVM" />
                    break;
                case SurveyQuestionType.MultipleRepetitive:
                    <RepetitiveButtonGroupReponseChart Response="responseGroup as SurveyResponsesGroupedByMultipleSelectableQuestionVM" />
                    break;
                default:
                    throw new NotImplementedException();
            }           
        </MudItem>
    }    

</MudGrid>       
