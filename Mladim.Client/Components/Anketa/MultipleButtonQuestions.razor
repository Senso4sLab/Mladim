@using Mladim.Client.ViewModels.Survey;
@using Mladim.Domain.Enums;




<MudText Color="Color.Tertiary" Typo="Typo.h2">@this.Question.Texts.FirstOrDefault()</MudText>

<MudStack Spacing="3">
    @for (int i = 1; i < count; i++)
    {      
      <ButtonQuestion Text="@Question.Texts[i]" Index="@(i-1)" EventResponse="MultipleButtonResponse"></ButtonQuestion>       
    }


</MudStack>



@code
{

    [Parameter]
    public SurveyQuestionVM Question { get; set; }

    [Parameter]
    public SurveryMultipleResponseVM SurveryResponse { get; set; }

    int? selectedValue = null;

    int count;

    protected override void OnInitialized()
    {
        count = Question.Texts.Count;
        foreach (var item in Enumerable.Range(1, count))
            SurveryResponse.Response.Add(SurveyMultipleResponseType.None);
    }

    private void MultipleButtonResponse((int index, SurveyMultipleResponseType type) tuple)
    {
        SurveryResponse.Response[tuple.index] = tuple.type;
    }
}
